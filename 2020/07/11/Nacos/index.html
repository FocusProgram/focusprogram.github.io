<!DOCTYPE html>
<html lang="zh-CN">





<head>
  <meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="/k-focusprogram.gitee.io/img/Mr.Kong.jpg">
  <link rel="icon" type="image/png" href="/k-focusprogram.gitee.io/img/Mr.Kong.jpg">
  <meta name="viewport"
        content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="description" content="May you experience the pain and happiness in your life">
  <meta name="author" content="Mr.Kong">
  <meta name="keywords" content="">
  <title>Nacos - Mr.Kong Blog</title>

  <link  rel="stylesheet" href="https://cdn.staticfile.org/twitter-bootstrap/4.4.1/css/bootstrap.min.css" />


  <link  rel="stylesheet" href="https://cdn.staticfile.org/github-markdown-css/4.0.0/github-markdown.min.css" />
  <link  rel="stylesheet" href="/k-focusprogram.gitee.io/lib/hint/hint.min.css" />

  
    <link  rel="stylesheet" href="https://cdn.staticfile.org/highlight.js/10.0.0/styles/dark.min.css" />
  

  


<!-- ä¸»é¢˜ä¾èµ–çš„å›¾æ ‡åº“ï¼Œä¸è¦è‡ªè¡Œä¿®æ”¹ -->

<link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_yg9cfy8wd6.css">



<link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_pjno9b9zyxs.css">


<link  rel="stylesheet" href="/k-focusprogram.gitee.io/css/main.css" />

<!-- è‡ªå®šä¹‰æ ·å¼ä¿æŒåœ¨æœ€åº•éƒ¨ -->


  <script  src="/k-focusprogram.gitee.io/js/utils.js" ></script>
<meta name="generator" content="Hexo 4.2.1"></head>


<body>
  <header style="height: 70vh;">
    <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand"
       href="/k-focusprogram.gitee.io/">&nbsp;<strong>Mr.Kong</strong>&nbsp;</a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/k-focusprogram.gitee.io/">
                <i class="iconfont icon-home-fill"></i>
                é¦–é¡µ
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/k-focusprogram.gitee.io/archives/">
                <i class="iconfont icon-archive-fill"></i>
                å½’æ¡£
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/k-focusprogram.gitee.io/categories/">
                <i class="iconfont icon-category-fill"></i>
                åˆ†ç±»
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/k-focusprogram.gitee.io/tags/">
                <i class="iconfont icon-tags-fill"></i>
                æ ‡ç­¾
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/k-focusprogram.gitee.io/links/">
                <i class="iconfont icon-link-fill"></i>
                å‹é“¾
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/k-focusprogram.gitee.io/about/">
                <i class="iconfont icon-user-fill"></i>
                å…³äº
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item dropdown">
              <a class="nav-link dropdown-toggle" href="#" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                <i class="iconfont icon-bookmark-fill"></i>
                å¼€æºåœ°å€
              </a>
              <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                
                  
                  
                  
                  <a class="dropdown-item" href="https://gitee.com/FocusProgram/" target="_blank" rel="noopener">
                    
                    Gitee
                  </a>
                
                  
                  
                  
                  <a class="dropdown-item" href="https://github.com/FocusProgram/" target="_blank" rel="noopener">
                    
                    GitHub
                  </a>
                
              </div>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" data-toggle="modal" data-target="#modalSearch">&nbsp;&nbsp;<i
                class="iconfont icon-search"></i>&nbsp;&nbsp;</a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

    <div class="view intro-2" id="background" parallax=true
         style="background: url('/k-focusprogram.gitee.io/img/neight.jpg') no-repeat center center;
           background-size: cover;">
      <div class="full-bg-img">
        <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
          <div class="container text-center white-text fadeInUp">
            <span class="h2" id="subtitle">
              
            </span>

            
              
  <div class="mt-3 post-meta">
    <i class="iconfont icon-date-fill" aria-hidden="true"></i>
    <time datetime="2020-07-11 01:53">
      2020å¹´7æœˆ11æ—¥ å‡Œæ™¨
    </time>
  </div>


<div class="mt-1">
  
    
    <span class="post-meta mr-2">
      <i class="iconfont icon-chart"></i>
      2.5k å­—
    </span>
  

  
    
    <span class="post-meta mr-2">
      <i class="iconfont icon-clock-fill"></i>
      
      
      31
       åˆ†é’Ÿ
    </span>
  

  
  
    
      <!-- ä¸è’œå­ç»Ÿè®¡æ–‡ç« PV -->
      <span id="busuanzi_container_page_pv" style="display: none">
        <i class="iconfont icon-eye" aria-hidden="true"></i>
        <span id="busuanzi_value_page_pv"></span> æ¬¡
      </span>
    
  
</div>

            
          </div>

          
        </div>
      </div>
    </div>
  </header>

  <main>
    
      

<div class="container-fluid">
  <div class="row">
    <div class="d-none d-lg-block col-lg-2"></div>
    <div class="col-lg-8 nopadding-md">
      <div class="container nopadding-md" id="board-ctn">
        <div class="py-5" id="board">
          <div class="post-content mx-auto" id="post">
            
              <p class="note note-info">
                
                  æœ¬æ–‡æœ€åæ›´æ–°äºï¼š2 å¤©å‰
                
              </p>
            
            <article class="markdown-body">
              <p><strong>Sping Cloud Alibaba Nacos</strong></p>
<hr>
<h1 id="1-ä»€ä¹ˆæ˜¯Nacosï¼Ÿ"><a href="#1-ä»€ä¹ˆæ˜¯Nacosï¼Ÿ" class="headerlink" title="1. ä»€ä¹ˆæ˜¯Nacosï¼Ÿ"></a>1. ä»€ä¹ˆæ˜¯Nacosï¼Ÿ</h1><blockquote>
<p><a href="https://github.com/alibaba/Nacos" target="_blank" rel="noopener">Nacos</a> è‡´åŠ›äºå¸®åŠ©æ‚¨å‘ç°ã€é…ç½®å’Œç®¡ç†å¾®æœåŠ¡ã€‚Nacos æä¾›äº†ä¸€ç»„ç®€å•æ˜“ç”¨çš„ç‰¹æ€§é›†ï¼Œå¸®åŠ©æ‚¨å¿«é€Ÿå®ç°åŠ¨æ€æœåŠ¡å‘ç°ã€æœåŠ¡é…ç½®ã€æœåŠ¡å…ƒæ•°æ®åŠæµé‡ç®¡ç†ã€‚Nacos å¸®åŠ©æ‚¨æ›´æ•æ·å’Œå®¹æ˜“åœ°æ„å»ºã€äº¤ä»˜å’Œç®¡ç†å¾®æœåŠ¡å¹³å°ã€‚ Nacos æ˜¯æ„å»ºä»¥â€œæœåŠ¡â€ä¸ºä¸­å¿ƒçš„ç°ä»£åº”ç”¨æ¶æ„ (ä¾‹å¦‚å¾®æœåŠ¡èŒƒå¼ã€äº‘åŸç”ŸèŒƒå¼) çš„æœåŠ¡åŸºç¡€è®¾æ–½ã€‚</p>
</blockquote>
<h1 id="2-Nacosçš„å…³é”®ç‰¹æ€§"><a href="#2-Nacosçš„å…³é”®ç‰¹æ€§" class="headerlink" title="2. Nacosçš„å…³é”®ç‰¹æ€§"></a>2. Nacosçš„å…³é”®ç‰¹æ€§</h1><ul>
<li>æœåŠ¡å‘ç°å’ŒæœåŠ¡å¥åº·ç›‘æµ‹</li>
</ul>
<blockquote>
<p>Nacos æ”¯æŒåŸºäº DNS å’ŒåŸºäº RPC çš„æœåŠ¡å‘ç°ã€‚æœåŠ¡æä¾›è€…ä½¿ç”¨ åŸç”ŸSDKã€OpenAPIã€æˆ–ä¸€ä¸ªç‹¬ç«‹çš„Agent TODOæ³¨å†Œ Service åï¼ŒæœåŠ¡æ¶ˆè´¹è€…å¯ä»¥ä½¿ç”¨DNS TODO æˆ–HTTP&amp;APIæŸ¥æ‰¾å’Œå‘ç°æœåŠ¡ã€‚</p>
<p>Nacos æä¾›å¯¹æœåŠ¡çš„å®æ—¶çš„å¥åº·æ£€æŸ¥ï¼Œé˜»æ­¢å‘ä¸å¥åº·çš„ä¸»æœºæˆ–æœåŠ¡å®ä¾‹å‘é€è¯·æ±‚ã€‚Nacos æ”¯æŒä¼ è¾“å±‚ (PING æˆ– TCP)å’Œåº”ç”¨å±‚ (å¦‚ HTTPã€MySQLã€ç”¨æˆ·è‡ªå®šä¹‰ï¼‰çš„å¥åº·æ£€æŸ¥ã€‚ å¯¹äºå¤æ‚çš„äº‘ç¯å¢ƒå’Œç½‘ç»œæ‹“æ‰‘ç¯å¢ƒä¸­ï¼ˆå¦‚ VPCã€è¾¹ç¼˜ç½‘ç»œç­‰ï¼‰æœåŠ¡çš„å¥åº·æ£€æŸ¥ï¼ŒNacos æä¾›äº† agent ä¸ŠæŠ¥æ¨¡å¼å’ŒæœåŠ¡ç«¯ä¸»åŠ¨æ£€æµ‹2ç§å¥åº·æ£€æŸ¥æ¨¡å¼ã€‚Nacos è¿˜æä¾›äº†ç»Ÿä¸€çš„å¥åº·æ£€æŸ¥ä»ªè¡¨ç›˜ï¼Œå¸®åŠ©æ‚¨æ ¹æ®å¥åº·çŠ¶æ€ç®¡ç†æœåŠ¡çš„å¯ç”¨æ€§åŠæµé‡ã€‚</p>
</blockquote>
<ul>
<li>åŠ¨æ€é…ç½®æœåŠ¡</li>
</ul>
<blockquote>
<p>åŠ¨æ€é…ç½®æœåŠ¡å¯ä»¥è®©æ‚¨ä»¥ä¸­å¿ƒåŒ–ã€å¤–éƒ¨åŒ–å’ŒåŠ¨æ€åŒ–çš„æ–¹å¼ç®¡ç†æ‰€æœ‰ç¯å¢ƒçš„åº”ç”¨é…ç½®å’ŒæœåŠ¡é…ç½®ã€‚</p>
<p>åŠ¨æ€é…ç½®æ¶ˆé™¤äº†é…ç½®å˜æ›´æ—¶é‡æ–°éƒ¨ç½²åº”ç”¨å’ŒæœåŠ¡çš„éœ€è¦ï¼Œè®©é…ç½®ç®¡ç†å˜å¾—æ›´åŠ é«˜æ•ˆå’Œæ•æ·ã€‚</p>
<p>é…ç½®ä¸­å¿ƒåŒ–ç®¡ç†è®©å®ç°æ— çŠ¶æ€æœåŠ¡å˜å¾—æ›´ç®€å•ï¼Œè®©æœåŠ¡æŒ‰éœ€å¼¹æ€§æ‰©å±•å˜å¾—æ›´å®¹æ˜“ã€‚</p>
<p>Nacos æä¾›äº†ä¸€ä¸ªç®€æ´æ˜“ç”¨çš„UI <a href="http://console.nacos.io/nacos/index.html" target="_blank" rel="noopener">æ§åˆ¶å°æ ·ä¾‹</a> å¸®åŠ©æ‚¨ç®¡ç†æ‰€æœ‰çš„æœåŠ¡å’Œåº”ç”¨çš„é…ç½®ã€‚Nacos è¿˜æä¾›åŒ…æ‹¬é…ç½®ç‰ˆæœ¬è·Ÿè¸ªã€é‡‘ä¸é›€å‘å¸ƒã€ä¸€é”®å›æ»šé…ç½®ä»¥åŠå®¢æˆ·ç«¯é…ç½®æ›´æ–°çŠ¶æ€è·Ÿè¸ªåœ¨å†…çš„ä¸€ç³»åˆ—å¼€ç®±å³ç”¨çš„é…ç½®ç®¡ç†ç‰¹æ€§ï¼Œå¸®åŠ©æ‚¨æ›´å®‰å…¨åœ°åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ç®¡ç†é…ç½®å˜æ›´å’Œé™ä½é…ç½®å˜æ›´å¸¦æ¥çš„é£é™©ã€‚</p>
</blockquote>
<ul>
<li>åŠ¨æ€ DNS æœåŠ¡</li>
</ul>
<blockquote>
<p>åŠ¨æ€ DNS æœåŠ¡æ”¯æŒæƒé‡è·¯ç”±ï¼Œè®©æ‚¨æ›´å®¹æ˜“åœ°å®ç°ä¸­é—´å±‚è´Ÿè½½å‡è¡¡ã€æ›´çµæ´»çš„è·¯ç”±ç­–ç•¥ã€æµé‡æ§åˆ¶ä»¥åŠæ•°æ®ä¸­å¿ƒå†…ç½‘çš„ç®€å•DNSè§£ææœåŠ¡ã€‚åŠ¨æ€DNSæœåŠ¡è¿˜èƒ½è®©æ‚¨æ›´å®¹æ˜“åœ°å®ç°ä»¥ DNS åè®®ä¸ºåŸºç¡€çš„æœåŠ¡å‘ç°ï¼Œä»¥å¸®åŠ©æ‚¨æ¶ˆé™¤è€¦åˆåˆ°å‚å•†ç§æœ‰æœåŠ¡å‘ç° API ä¸Šçš„é£é™©ã€‚</p>
<p>Nacos æä¾›äº†ä¸€äº›ç®€å•çš„ DNS APIs TODO å¸®åŠ©æ‚¨ç®¡ç†æœåŠ¡çš„å…³è”åŸŸåå’Œå¯ç”¨çš„ IP:PORT åˆ—è¡¨.</p>
</blockquote>
<ul>
<li>æœåŠ¡åŠå…¶å…ƒæ•°æ®ç®¡ç†</li>
</ul>
<blockquote>
<p>Nacos èƒ½è®©æ‚¨ä»å¾®æœåŠ¡å¹³å°å»ºè®¾çš„è§†è§’ç®¡ç†æ•°æ®ä¸­å¿ƒçš„æ‰€æœ‰æœåŠ¡åŠå…ƒæ•°æ®ï¼ŒåŒ…æ‹¬ç®¡ç†æœåŠ¡çš„æè¿°ã€ç”Ÿå‘½å‘¨æœŸã€æœåŠ¡çš„é™æ€ä¾èµ–åˆ†æã€æœåŠ¡çš„å¥åº·çŠ¶æ€ã€æœåŠ¡çš„æµé‡ç®¡ç†ã€è·¯ç”±åŠå®‰å…¨ç­–ç•¥ã€æœåŠ¡çš„ SLA ä»¥åŠæœ€é¦–è¦çš„ metrics ç»Ÿè®¡æ•°æ®ã€‚</p>
</blockquote>
<h1 id="3-Nacosç”Ÿæ€"><a href="#3-Nacosç”Ÿæ€" class="headerlink" title="3. Nacosç”Ÿæ€"></a>3. Nacosç”Ÿæ€</h1><p><img src="https://image.focusprogram.top/nacosMap.jpg" srcset="/k-focusprogram.gitee.io/img/loading.gif" alt=""></p>
<p><img src="https://image.focusprogram.top/1533045871534-e64b8031-008c-4dfc-b6e8-12a597a003fb.png" srcset="/k-focusprogram.gitee.io/img/loading.gif" alt=""></p>
<h1 id="4-å¯åŠ¨-Nacos-Server-å¹¶æ·»åŠ é…ç½®"><a href="#4-å¯åŠ¨-Nacos-Server-å¹¶æ·»åŠ é…ç½®" class="headerlink" title="4. å¯åŠ¨ Nacos Server å¹¶æ·»åŠ é…ç½®"></a>4. å¯åŠ¨ Nacos Server å¹¶æ·»åŠ é…ç½®</h1><h2 id="4-1-ä¸‹è½½åœ°å€"><a href="#4-1-ä¸‹è½½åœ°å€" class="headerlink" title="4.1 ä¸‹è½½åœ°å€"></a>4.1 <a href="https://github.com/alibaba/nacos/releases" target="_blank" rel="noopener">ä¸‹è½½åœ°å€</a></h2><h2 id="4-2-å¯åŠ¨Nacos-Service"><a href="#4-2-å¯åŠ¨Nacos-Service" class="headerlink" title="4.2 å¯åŠ¨Nacos Service"></a>4.2 å¯åŠ¨Nacos Service</h2><div class="hljs"><pre><code class="hljs autohotkey"><span class="hljs-title">Linux/Unix/Mac æ“ä½œç³»ç»Ÿï¼Œæ‰§è¡Œå‘½ä»¤(é»˜è®¤é›†ç¾¤ç‰ˆæœ¬å¯åŠ¨):</span>

`sh startup.sh -m standalone`(å•æœº) `sh startup.sh -m cluster`(é›†ç¾¤)

Windows æ“ä½œç³»ç»Ÿï¼Œæ‰§è¡Œå‘½ä»¤ `cmd startup.cmd`

é»˜è®¤è´¦æˆ·å¯†ç ï¼šnacos/naocs</code></pre></div>

<h2 id="4-3-å‘½ä»¤æ·»åŠ é…ç½®"><a href="#4-3-å‘½ä»¤æ·»åŠ é…ç½®" class="headerlink" title="4.3 å‘½ä»¤æ·»åŠ é…ç½®"></a>4.3 å‘½ä»¤æ·»åŠ é…ç½®</h2><div class="hljs"><pre><code class="hljs perl">curl -X POST <span class="hljs-string">"http://127.0.0.1:8848/nacos/v1/cs/configs?dataId=nacosConfig.properties&amp;group=DEFAULT_GROUP&amp;content=user.name=Mr.Kong%0Auser.age=24"</span></code></pre></div>

<div class="hljs"><pre><code class="hljs routeros">æ·»åŠ é…ç½®å¦‚ä¸‹ï¼š
dataId ä¸º nacosConfig.properties
group ä¸º DEFAULT_GROUP

å†…å®¹å¦‚ä¸‹:
user.<span class="hljs-attribute">name</span>=Mr.Kong
user.<span class="hljs-attribute">age</span>=24</code></pre></div>

<p><img src="https://image.focusprogram.top/20200305152113.png" srcset="/k-focusprogram.gitee.io/img/loading.gif" alt=""></p>
<h1 id="5-Nacos-Config-æ•´åˆ"><a href="#5-Nacos-Config-æ•´åˆ" class="headerlink" title="5. Nacos Config æ•´åˆ"></a>5. Nacos Config æ•´åˆ</h1><h2 id="5-1-å¼•å…¥mavenä¾èµ–"><a href="#5-1-å¼•å…¥mavenä¾èµ–" class="headerlink" title="5.1 å¼•å…¥mavenä¾èµ–"></a>5.1 å¼•å…¥mavenä¾èµ–</h2><div class="hljs"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.cloud<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-cloud-starter-alibaba-nacos-config<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span></code></pre></div>

<h2 id="5-2-æ·»åŠ bootstrap-properties"><a href="#5-2-æ·»åŠ bootstrap-properties" class="headerlink" title="5.2 æ·»åŠ bootstrap.properties"></a>5.2 æ·»åŠ bootstrap.properties</h2><div class="hljs"><pre><code class="hljs ini"><span class="hljs-attr">spring.application.name</span>=nacosConfig  <span class="hljs-comment">#ä¿æŒè·ŸNacosçš„idåä¸€è‡´</span>
<span class="hljs-attr">spring.cloud.nacos.config.server-addr</span>=ip:<span class="hljs-number">8848</span> <span class="hljs-comment">#æœåŠ¡å™¨ipæˆ–æœ¬åœ°ip</span></code></pre></div>

<h2 id="5-3-æ·»åŠ application-properties"><a href="#5-3-æ·»åŠ application-properties" class="headerlink" title="5.3 æ·»åŠ application.properties"></a>5.3 æ·»åŠ application.properties</h2><div class="hljs"><pre><code class="hljs ini"><span class="hljs-attr">server.port</span>=<span class="hljs-number">9000</span></code></pre></div>

<h2 id="5-4-è·å–ç›¸åº”çš„é…ç½®"><a href="#5-4-è·å–ç›¸åº”çš„é…ç½®" class="headerlink" title="5.4 è·å–ç›¸åº”çš„é…ç½®"></a>5.4 è·å–ç›¸åº”çš„é…ç½®</h2><div class="hljs"><pre><code class="hljs java"><span class="hljs-meta">@RefreshScope</span> <span class="hljs-comment">//æ‰“å¼€åŠ¨æ€åˆ·æ–°åŠŸèƒ½</span>
 <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">SampleController</span> </span>&#123;

 	<span class="hljs-meta">@Value</span>(<span class="hljs-string">"$&#123;user.name&#125;"</span>)
 	String userName;

 	<span class="hljs-meta">@Value</span>(<span class="hljs-string">"$&#123;user.age&#125;"</span>)
 	<span class="hljs-keyword">int</span> age;
 &#125;</code></pre></div>

<h2 id="5-5-åº”ç”¨å¯åŠ¨"><a href="#5-5-åº”ç”¨å¯åŠ¨" class="headerlink" title="5.5 åº”ç”¨å¯åŠ¨"></a>5.5 åº”ç”¨å¯åŠ¨</h2><p><img src="https://image.focusprogram.top/20200305153453.png" srcset="/k-focusprogram.gitee.io/img/loading.gif" alt=""></p>
<h2 id="5-6-åŸç†è§£æ"><a href="#5-6-åŸç†è§£æ" class="headerlink" title="5.6 åŸç†è§£æ"></a>5.6 åŸç†è§£æ</h2><h3 id="5-6-1-Nacos-Config-æ•°æ®ç»“æ„"><a href="#5-6-1-Nacos-Config-æ•°æ®ç»“æ„" class="headerlink" title="5.6.1 Nacos Config æ•°æ®ç»“æ„"></a>5.6.1 Nacos Config æ•°æ®ç»“æ„</h3><div class="hljs"><pre><code class="hljs routeros">Nacos<span class="hljs-built_in"> Config </span>ä¸»è¦é€šè¿‡ dataId å’Œ<span class="hljs-built_in"> group </span>æ¥å”¯ä¸€ç¡®å®šä¸€æ¡é…ç½®

Nacos<span class="hljs-built_in"> Client </span>ä» Nacos<span class="hljs-built_in"> Server </span>ç«¯è·å–æ•°æ®æ—¶ï¼Œè°ƒç”¨çš„æ˜¯æ­¤æ¥å£
ConfigService.getConfig(String dataId, String group, long timeoutMs)</code></pre></div>

<h3 id="5-6-2-Spring-Cloud-åº”ç”¨è·å–æ•°æ®"><a href="#5-6-2-Spring-Cloud-åº”ç”¨è·å–æ•°æ®" class="headerlink" title="5.6.2 Spring Cloud åº”ç”¨è·å–æ•°æ®"></a>5.6.2 Spring Cloud åº”ç”¨è·å–æ•°æ®</h3><h4 id="5-6-2-1-dataId"><a href="#5-6-2-1-dataId" class="headerlink" title="5.6.2.1 dataId"></a>5.6.2.1 dataId</h4><div class="hljs"><pre><code class="hljs markdown">åœ¨ Nacos Config Starter ä¸­ï¼ŒdataId çš„æ‹¼æ¥æ ¼å¼å¦‚ä¸‹

$&#123;prefix&#125; - $&#123;spring.profiles.active&#125; . $&#123;file-extension&#125;

<span class="hljs-bullet">- </span><span class="hljs-code">`prefix`</span> é»˜è®¤ä¸º <span class="hljs-code">`spring.application.name`</span> çš„å€¼ï¼Œä¹Ÿå¯ä»¥é€šè¿‡é…ç½®é¡¹ <span class="hljs-code">`spring.cloud.nacos.config.prefix`</span>æ¥é…ç½®ã€‚

<span class="hljs-bullet">- </span><span class="hljs-code">`spring.profiles.active`</span> å³ä¸ºå½“å‰ç¯å¢ƒå¯¹åº”çš„ profileï¼Œè¯¦æƒ…å¯ä»¥å‚è€ƒ [<span class="hljs-string">Spring Bootæ–‡æ¡£</span>](<span class="hljs-link">https://docs.spring.io/spring-boot/docs/current/reference/html/boot-features-profiles.html#boot-features-profiles</span>)

<span class="hljs-bullet">-  </span>æ³¨æ„:å½“ activeprofile ä¸ºç©ºæ—¶ï¼Œå¯¹åº”çš„è¿æ¥ç¬¦ - ä¹Ÿå°†ä¸å­˜åœ¨ï¼ŒdataId çš„æ‹¼æ¥æ ¼å¼å˜æˆ prefix.prefix

<span class="hljs-bullet">- </span><span class="hljs-code">`file-extension`</span> ä¸ºé…ç½®å†…å®¹çš„æ•°æ®æ ¼å¼ï¼Œå¯ä»¥é€šè¿‡é…ç½®é¡¹ <span class="hljs-code">`spring.cloud.nacos.config.file-extension`</span>æ¥é…ç½®ã€‚ ç›®å‰åªæ”¯æŒ <span class="hljs-code">`properties`</span> ç±»å‹ã€‚</code></pre></div>

<h4 id="5-6-2-2-group"><a href="#5-6-2-2-group" class="headerlink" title="5.6.2.2 group"></a>5.6.2.2 group</h4><div class="hljs"><pre><code class="hljs autohotkey">- `group` é»˜è®¤ä¸º `DEFAULT_GROUP`ï¼Œå¯ä»¥é€šè¿‡ `spring.cloud.nacos.config.group` é…ç½®ã€‚</code></pre></div>

<h4 id="5-6-2-3-è‡ªåŠ¨æ³¨å…¥"><a href="#5-6-2-3-è‡ªåŠ¨æ³¨å…¥" class="headerlink" title="5.6.2.3 è‡ªåŠ¨æ³¨å…¥"></a>5.6.2.3 è‡ªåŠ¨æ³¨å…¥</h4><div class="hljs"><pre><code class="hljs routeros">Nacos<span class="hljs-built_in"> Config </span>Starter å®ç°äº† `org.springframework.cloud.bootstrap.config.PropertySourceLocator`æ¥å£ï¼Œå¹¶å°†ä¼˜å…ˆçº§è®¾ç½®æˆäº†æœ€é«˜ã€‚

åœ¨ Spring Cloud åº”ç”¨å¯åŠ¨é˜¶æ®µï¼Œä¼šä¸»åŠ¨ä» Nacos<span class="hljs-built_in"> Server </span>ç«¯è·å–å¯¹åº”çš„æ•°æ®ï¼Œå¹¶å°†è·å–åˆ°çš„æ•°æ®è½¬æ¢æˆ PropertySource ä¸”æ³¨å…¥åˆ° Environment çš„ PropertySources å±æ€§ä¸­ï¼Œæ‰€ä»¥ä½¿ç”¨ @Value æ³¨è§£ä¹Ÿèƒ½ç›´æ¥è·å– Nacos<span class="hljs-built_in"> Server </span>ç«¯é…ç½®çš„å†…å®¹ã€‚</code></pre></div>

<h4 id="5-6-2-4-åŠ¨æ€åˆ·æ–°"><a href="#5-6-2-4-åŠ¨æ€åˆ·æ–°" class="headerlink" title="5.6.2.4 åŠ¨æ€åˆ·æ–°"></a>5.6.2.4 åŠ¨æ€åˆ·æ–°</h4><div class="hljs"><pre><code class="hljs routeros">Nacos<span class="hljs-built_in"> Config </span>Starter é»˜è®¤ä¸ºæ‰€æœ‰è·å–æ•°æ®æˆåŠŸçš„ Nacos çš„é…ç½®é¡¹æ·»åŠ äº†ç›‘å¬åŠŸèƒ½ï¼Œåœ¨ç›‘å¬åˆ°æœåŠ¡ç«¯é…ç½®å‘ç”Ÿå˜åŒ–æ—¶ä¼šå®æ—¶è§¦å‘ `org.springframework.cloud.context.refresh.ContextRefresher` çš„ refresh æ–¹æ³• ã€‚

å¦‚æœéœ€è¦å¯¹ Bean è¿›è¡ŒåŠ¨æ€åˆ·æ–°ï¼Œç»™ç±»æ·»åŠ  `@RefreshScope` æˆ– `@ConfigurationProperties`æ³¨è§£ã€‚</code></pre></div>

<h4 id="5-6-2-5-Endpoint-ä¿¡æ¯æŸ¥çœ‹"><a href="#5-6-2-5-Endpoint-ä¿¡æ¯æŸ¥çœ‹" class="headerlink" title="5.6.2.5 Endpoint ä¿¡æ¯æŸ¥çœ‹"></a>5.6.2.5 Endpoint ä¿¡æ¯æŸ¥çœ‹</h4><div class="hljs"><pre><code class="hljs markdown">Springbootæ”¯æŒè¿™ä¸€ç‚¹ï¼ŒNacos Configä¹ŸåŒæ—¶å¯ä»¥ä½¿ç”¨Endpointæ¥æš´éœ²ä¿¡æ¯ã€‚

åœ¨maven ä¸­æ·»åŠ  <span class="hljs-code">`spring-boot-starter-actuator`</span>ä¾èµ–ï¼Œå¹¶åœ¨é…ç½®ä¸­å…è®¸ Endpoints çš„è®¿é—®ã€‚

<span class="hljs-bullet">- </span>Spring Boot 1.x ä¸­æ·»åŠ é…ç½® management.security.enabled=false
<span class="hljs-bullet">- </span>Spring Boot 2.x ä¸­æ·»åŠ é…ç½® management.endpoints.web.exposure.include=*

Spring Boot 1.x å¯ä»¥é€šè¿‡è®¿é—® [<span class="hljs-string">http://127.0.0.1:9000/nacos_config</span>](<span class="hljs-link">http://127.0.0.1:9000/nacos_config</span>) æ¥æŸ¥çœ‹ Nacos Endpoint çš„ä¿¡æ¯ã€‚

Spring Boot 2.x å¯ä»¥é€šè¿‡è®¿é—® [<span class="hljs-string">http://127.0.0.1:9000/actuator/nacos-config</span>](<span class="hljs-link">http://127.0.0.1:9000/actuator/nacos-config</span>) æ¥è®¿é—®ã€‚</code></pre></div>

<p><img src="https://image.focusprogram.top/20200305162410.png" srcset="/k-focusprogram.gitee.io/img/loading.gif" alt=""></p>
<h2 id="5-7-æ›´å¤š"><a href="#5-7-æ›´å¤š" class="headerlink" title="5.7 æ›´å¤š"></a>5.7 æ›´å¤š</h2><table>
<thead>
<tr>
<th>é…ç½®é¡¹</th>
<th>key</th>
<th>é»˜è®¤å€¼</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody><tr>
<td>æœåŠ¡ç«¯åœ°å€</td>
<td>spring.cloud.nacos.config.server-addr</td>
<td></td>
<td></td>
</tr>
<tr>
<td>DataIdå‰ç¼€</td>
<td>spring.cloud.nacos.config.prefix</td>
<td></td>
<td>spring.application.name</td>
</tr>
<tr>
<td>Group</td>
<td>spring.cloud.nacos.config.group</td>
<td>DEFAULT_GROUP</td>
<td></td>
</tr>
<tr>
<td>dataIDåç¼€åŠå†…å®¹æ–‡ä»¶æ ¼å¼</td>
<td>spring.cloud.nacos.config.file-extension</td>
<td>properties</td>
<td>dataIdçš„åç¼€ï¼ŒåŒæ—¶ä¹Ÿæ˜¯é…ç½®å†…å®¹çš„æ–‡ä»¶æ ¼å¼ï¼Œç›®å‰åªæ”¯æŒ properties</td>
</tr>
<tr>
<td>é…ç½®å†…å®¹çš„ç¼–ç æ–¹å¼</td>
<td>spring.cloud.nacos.config.encode</td>
<td>UTF-8</td>
<td>é…ç½®çš„ç¼–ç </td>
</tr>
<tr>
<td>è·å–é…ç½®çš„è¶…æ—¶æ—¶é—´</td>
<td>spring.cloud.nacos.config.timeout</td>
<td>3000</td>
<td>å•ä½ä¸º ms</td>
</tr>
<tr>
<td>é…ç½®çš„å‘½åç©ºé—´</td>
<td>spring.cloud.nacos.config.namespace</td>
<td></td>
<td>å¸¸ç”¨åœºæ™¯ä¹‹ä¸€æ˜¯ä¸åŒç¯å¢ƒçš„é…ç½®çš„åŒºåˆ†éš”ç¦»ï¼Œä¾‹å¦‚å¼€å‘æµ‹è¯•ç¯å¢ƒå’Œç”Ÿäº§ç¯å¢ƒçš„èµ„æºéš”ç¦»ç­‰ã€‚</td>
</tr>
<tr>
<td>AccessKey</td>
<td>spring.cloud.nacos.config.access-key</td>
<td></td>
<td></td>
</tr>
<tr>
<td>SecretKey</td>
<td>spring.cloud.nacos.config.secret-key</td>
<td></td>
<td></td>
</tr>
<tr>
<td>ç›¸å¯¹è·¯å¾„</td>
<td>spring.cloud.nacos.config.context-path</td>
<td></td>
<td>æœåŠ¡ç«¯ API çš„ç›¸å¯¹è·¯å¾„</td>
</tr>
<tr>
<td>æ¥å…¥ç‚¹</td>
<td>spring.cloud.nacos.config.endpoint</td>
<td>UTF-8</td>
<td>åœ°åŸŸçš„æŸä¸ªæœåŠ¡çš„å…¥å£åŸŸåï¼Œé€šè¿‡æ­¤åŸŸåå¯ä»¥åŠ¨æ€åœ°æ‹¿åˆ°æœåŠ¡ç«¯åœ°å€</td>
</tr>
<tr>
<td>æ˜¯å¦å¼€å¯ç›‘å¬å’Œè‡ªåŠ¨åˆ·æ–°</td>
<td>spring.cloud.nacos.config.refresh.enabled</td>
<td>TRUE</td>
<td></td>
</tr>
</tbody></table>
<h1 id="6-Nacos-Discovery-æ•´åˆ"><a href="#6-Nacos-Discovery-æ•´åˆ" class="headerlink" title="6. Nacos Discovery æ•´åˆ"></a>6. Nacos Discovery æ•´åˆ</h1><blockquote>
<p>Nacos Discovery Starter å®Œæˆ Spring Cloud åº”ç”¨çš„æœåŠ¡æ³¨å†Œä¸å‘ç°ã€‚</p>
</blockquote>
<h2 id="6-1-å¼•å…¥mavenä¾èµ–"><a href="#6-1-å¼•å…¥mavenä¾èµ–" class="headerlink" title="6.1 å¼•å…¥mavenä¾èµ–"></a>6.1 å¼•å…¥mavenä¾èµ–</h2><div class="hljs"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.cloud<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-cloud-starter-alibaba-nacos-discovery<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span></code></pre></div>

<h2 id="6-2-æ·»åŠ application-properties"><a href="#6-2-æ·»åŠ application-properties" class="headerlink" title="6.2 æ·»åŠ application.properties"></a>6.2 æ·»åŠ application.properties</h2><div class="hljs"><pre><code class="hljs angelscript">spring.cloud.nacos.discovery.server-addr=<span class="hljs-number">127.0</span><span class="hljs-number">.0</span><span class="hljs-number">.1</span>:<span class="hljs-number">8848</span></code></pre></div>

<h2 id="6-3-æœåŠ¡æ³¨å†Œå’Œå‘ç°"><a href="#6-3-æœåŠ¡æ³¨å†Œå’Œå‘ç°" class="headerlink" title="6.3 æœåŠ¡æ³¨å†Œå’Œå‘ç°"></a>6.3 æœåŠ¡æ³¨å†Œå’Œå‘ç°</h2><div class="hljs"><pre><code class="hljs less"><span class="hljs-variable">@SpringBootApplication</span>
<span class="hljs-variable">@EnableDiscoveryClient</span>
public class ProviderApplication &#123;

 	<span class="hljs-selector-tag">public</span> <span class="hljs-selector-tag">static</span> <span class="hljs-selector-tag">void</span> <span class="hljs-selector-tag">main</span>(String[] args) &#123;
 		<span class="hljs-selector-tag">SpringApplication</span><span class="hljs-selector-class">.run</span>(Application.class, args);
 	&#125;

 	@<span class="hljs-selector-tag">RestController</span>
 	<span class="hljs-selector-tag">class</span> <span class="hljs-selector-tag">EchoController</span> &#123;
 		<span class="hljs-variable">@RequestMapping</span>(value = <span class="hljs-string">"/echo/&#123;string&#125;"</span>, method = RequestMethod.GET)
 		public String echo(<span class="hljs-variable">@PathVariable</span> String string) &#123;
 				<span class="hljs-selector-tag">return</span> <span class="hljs-selector-tag">string</span>;
 		&#125;
 	&#125;
 &#125;</code></pre></div>

<h2 id="6-4-æŸ¥è¯¢æœåŠ¡"><a href="#6-4-æŸ¥è¯¢æœåŠ¡" class="headerlink" title="6.4 æŸ¥è¯¢æœåŠ¡"></a>6.4 æŸ¥è¯¢æœåŠ¡</h2><p><img src="https://image.focusprogram.top/20200305163858.png" srcset="/k-focusprogram.gitee.io/img/loading.gif" alt=""></p>
<h2 id="6-5-æœåŠ¡å‘ç°"><a href="#6-5-æœåŠ¡å‘ç°" class="headerlink" title="6.5 æœåŠ¡å‘ç°"></a>6.5 æœåŠ¡å‘ç°</h2><div class="hljs"><pre><code class="hljs routeros">Nacos<span class="hljs-built_in"> Discovery </span>Starteré»˜è®¤é›†æˆäº†Ribbonï¼Œå› æ­¤å¯¹äºä½¿ç”¨Ribbonè¿›è¡Œè´Ÿè½½å¹³è¡¡çš„ç»„ä»¶ï¼Œæ‚¨&gt; å¯ä»¥ç›´æ¥ä½¿ç”¨NacosæœåŠ¡å‘ç°ã€‚

NacosServerListå®ç°com.netflix.loadbalancer.ServerListæ¥å£å¹¶åœ¨@ConditionOnMissing&gt; Beanä¸‹è‡ªåŠ¨æ³¨å…¥å®ƒã€‚</code></pre></div>

<h2 id="6-6-åŸç†"><a href="#6-6-åŸç†" class="headerlink" title="6.6 åŸç†"></a>6.6 åŸç†</h2><div class="hljs"><pre><code class="hljs css">æœåŠ¡æ³¨å†Œï¼š

åœ¨<span class="hljs-selector-tag">Spring</span>äº‘åº”ç”¨ç¨‹åºçš„å¯åŠ¨é˜¶æ®µï¼Œå°†ç›‘è§†<span class="hljs-selector-tag">WebServerInitializedEvent</span>äº‹ä»¶ã€‚åœ¨åˆå§‹åŒ–<span class="hljs-selector-tag">Web</span>å®¹å™¨åæ”¶åˆ°<span class="hljs-selector-tag">WebServerInitializedEvent</span>äº‹ä»¶æ—¶ï¼Œå°†è§¦å‘æ³¨å†Œæ“ä½œï¼Œå¹¶è°ƒç”¨<span class="hljs-selector-tag">ServiceRegistry</span>æ³¨å†Œæ–¹æ³•ä»¥å°†æœåŠ¡æ³¨å†Œåˆ°<span class="hljs-selector-tag">Nacos</span> <span class="hljs-selector-tag">Server</span>ã€‚

æœåŠ¡å‘ç°ï¼š

<span class="hljs-selector-tag">NacosServerList</span>å®ç°<span class="hljs-selector-tag">com</span><span class="hljs-selector-class">.netflix</span><span class="hljs-selector-class">.loadbalancer</span><span class="hljs-selector-class">.ServerList</span>æ¥å£å¹¶åœ¨<span class="hljs-keyword">@ConditionOnMissingBean</span>ä¸‹è‡ªåŠ¨æ³¨å…¥å®ƒã€‚åŠŸèƒ½åŒºé»˜è®¤ä¸ºé›†æˆã€‚</code></pre></div>

<h2 id="6-7-æ›´å¤š"><a href="#6-7-æ›´å¤š" class="headerlink" title="6.7 æ›´å¤š"></a>6.7 æ›´å¤š</h2><table>
<thead>
<tr>
<th>é…ç½®é¡¹</th>
<th>é”®</th>
<th>é»˜è®¤å€¼</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody><tr>
<td>æœåŠ¡å™¨åœ°å€</td>
<td>spring.cloud.nacos.discovery.server-addr</td>
<td></td>
<td>nacosæ³¨å†Œä¸­å¿ƒåœ°å€</td>
</tr>
<tr>
<td>æœåŠ¡å</td>
<td>spring.cloud.nacos.discovery.service</td>
<td>spring.application.name</td>
<td>æœåŠ¡å</td>
</tr>
<tr>
<td>æƒé‡</td>
<td>spring.cloud.nacos.discovery.weight</td>
<td>1</td>
<td>å€¼ä»1åˆ°100ï¼Œå€¼è¶Šå¤§ï¼Œé‡é‡è¶Šå¤§</td>
</tr>
<tr>
<td>IP</td>
<td>spring.cloud.nacos.discovery.ip</td>
<td></td>
<td>ip address to registryï¼Œæœ€é«˜ä¼˜å…ˆçº§</td>
</tr>
<tr>
<td>ç½‘ç»œæ¥å£</td>
<td>spring.cloud.nacos.discovery.network-interface</td>
<td></td>
<td>æœªé…ç½®IPæ—¶ï¼Œæ³¨å†Œçš„IPåœ°å€ä¸ºç½‘ç»œæ¥å£å¯¹åº”çš„IPåœ°å€ã€‚å¦‚æœæœªé…ç½®æ­¤é¡¹ï¼Œåˆ™é»˜è®¤é‡‡ç”¨ç¬¬ä¸€ä¸ªç½‘ç»œæ¥å£çš„åœ°å€ã€‚</td>
</tr>
<tr>
<td>ç«¯å£</td>
<td>spring.cloud.nacos.discovery.port</td>
<td>-1</td>
<td>æ³¨å†Œç«¯å£ï¼Œæ— éœ€é…ç½®å³å¯è‡ªåŠ¨æ£€æµ‹</td>
</tr>
<tr>
<td>namesapce</td>
<td>spring.cloud.nacos.discovery.namespace</td>
<td></td>
<td>å¼€å‘ç¯å¢ƒï¼ˆdevã€proç­‰ï¼‰</td>
</tr>
<tr>
<td>accesskey</td>
<td>spring.cloud.nacos.discovery.access-key</td>
<td></td>
<td></td>
</tr>
<tr>
<td>secretkey</td>
<td>spring.cloud.nacos.discovery.secret-key</td>
<td></td>
<td></td>
</tr>
<tr>
<td>å…ƒæ•°æ®</td>
<td>spring.cloud.nacos.discovery.metadata</td>
<td></td>
<td>æ‰©å±•æ•°æ®ï¼Œä½¿ç”¨Mapæ ¼å¼é…ç½®</td>
</tr>
<tr>
<td>æ—¥å¿—åç§°</td>
<td>spring.cloud.nacos.discovery.log-name</td>
<td></td>
<td></td>
</tr>
<tr>
<td>ç«¯ç‚¹</td>
<td>spring.cloud.nacos.discovery.endpoint</td>
<td></td>
<td>æœåŠ¡çš„åŸŸåï¼Œé€šè¿‡è¯¥åŸŸåå¯ä»¥åŠ¨æ€è·å–æœåŠ¡å™¨åœ°å€ã€‚</td>
</tr>
<tr>
<td>é›†æˆåŠŸèƒ½åŒº</td>
<td>ribbon.nacos.enabled</td>
<td>TRUE</td>
<td></td>
</tr>
</tbody></table>

            </article>
            <hr>
            <div>
              <div class="post-metas mb-3">
                
                  <div class="post-meta mr-3">
                    <i class="iconfont icon-category"></i>
                    
                      <a class="hover-with-bg" href="/k-focusprogram.gitee.io/categories/%E5%BE%AE%E6%9C%8D%E5%8A%A1/">å¾®æœåŠ¡</a>
                    
                  </div>
                
                
                  <div class="post-meta">
                    <i class="iconfont icon-tags"></i>
                    
                      <a class="hover-with-bg" href="/k-focusprogram.gitee.io/tags/SpringCloud/">SpringCloud</a>
                    
                      <a class="hover-with-bg" href="/k-focusprogram.gitee.io/tags/%E5%BE%AE%E6%9C%8D%E5%8A%A1/">å¾®æœåŠ¡</a>
                    
                  </div>
                
              </div>
              
                <p class="note note-warning">æœ¬åšå®¢æ‰€æœ‰æ–‡ç« é™¤ç‰¹åˆ«å£°æ˜å¤–ï¼Œå‡é‡‡ç”¨ <a href="https://creativecommons.org/licenses/by-sa/4.0/deed.zh" target="_blank" rel="nofollow noopener noopener">CC BY-SA 4.0 åè®®</a> ï¼Œè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ï¼</p>
              
              
                <div class="post-prevnext row">
                  <div class="post-prev col-6">
                    
                    
                      <a href="/k-focusprogram.gitee.io/2020/07/11/Zookeeper/">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">Zookeeper</span>
                        <span class="visible-mobile">ä¸Šä¸€ç¯‡</span>
                      </a>
                    
                  </div>
                  <div class="post-next col-6">
                    
                    
                      <a href="/k-focusprogram.gitee.io/2020/07/11/Eureka/">
                        <span class="hidden-mobile">Eureka</span>
                        <span class="visible-mobile">ä¸‹ä¸€ç¯‡</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </div>
                </div>
              
            </div>

            
              <!-- Comments -->
              <div class="comments" id="comments">
                
                
  <div id="vcomments"></div>
  <script type="text/javascript">
    function loadValine() {
      addScript('https://cdn.staticfile.org/valine/1.4.14/Valine.min.js', function () {
        new Valine({
          el: "#vcomments",
          app_id: "XjjXuhrzyfTeHFAzz4XEQWeA-gzGzoHsz",
          app_key: "VOV2U2qRAhtqyuBiioUEvrNV",
          placeholder: "ç•™ä¸‹æ‚¨æƒ³è¯´çš„è¯å§(*^â–½^*)",
          path: window.location.pathname,
          avatar: "wavatar",
          meta: ["nick","mail"],
          pageSize: "10",
          lang: "zh-CN",
          highlight: true,
          recordIP: true,
          serverURLs: "",
        });
      });
    }
    createObserver(loadValine, 'vcomments');
  </script>
  <noscript>Please enable JavaScript to view the <a href="https://valine.js.org" target="_blank" rel="nofollow noopener noopener">comments
      powered by Valine.</a></noscript>


              </div>
            
          </div>
        </div>
      </div>
    </div>
    
      <div class="d-none d-lg-block col-lg-2 toc-container" id="toc-ctn">
        <div id="toc">
  <p class="toc-header"><i class="iconfont icon-list"></i>&nbsp;ç›®å½•</p>
  <div id="tocbot"></div>
</div>

      </div>
    
  </div>
</div>

<!--
<script src="https://utteranc.es/client.js"
        repo="FocusProgram/focusprogram.github.io"
        issue-term="title"
        label="utterances"
        theme="github-light"
        crossorigin="anonymous"
        async>
</script>
-->


<!-- Custom -->


    
  </main>

  
    <a id="scroll-top-button" href="#" role="button">
      <i class="iconfont icon-arrowup" aria-hidden="true"></i>
    </a>
  

  
    <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">æœç´¢</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v"
                 for="local-search-input">å…³é”®è¯</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>
  

  

  

  <footer class="mt-5">
<div id="dark-div">
  <a id="dark" onclick="switchDarkMode()"></a>
</div>
<script>
  var isNight = new Date().getHours() >= 22 || new Date().getHours() < 7;
  if( matchMedia('(prefers-color-scheme: dark)').matches || isNight || localStorage.getItem('dark') === '1') {
    if(!(isNight&&localStorage.getItem('noDark') === '1')) {
      document.body.classList.add('dark');
    }
  }
  document.getElementById('dark').innerHTML = document.querySelector("body").classList.contains("dark")?"ğŸŒ™":"ğŸŒ";
</script>
  <div class="text-center py-3">
    <div>
      <a rel="nofollow noopener"><span>æ°¸è¿œæ‰§ç€&nbsp;&nbsp;</span></a>
      <i class="iconfont icon-love"></i>
      <a rel="nofollow noopener">
        <span>&nbsp;&nbsp;æ°¸è¿œçƒ­çˆ±</span></a>
    </div>
    
  <div class="statistics">
    
    

    
      
        <!-- ä¸è’œå­ç»Ÿè®¡PV -->
        <span id="busuanzi_container_site_pv" style="display: none">
            æ€»è®¿é—®é‡ 
            <span id="busuanzi_value_site_pv"></span>
             æ¬¡
          </span>
      
      
        <!-- ä¸è’œå­ç»Ÿè®¡UV -->
        <span id="busuanzi_container_site_uv" style="display: none">
            æ€»è®¿å®¢æ•° 
            <span id="busuanzi_value_site_uv"></span>
             äºº
          </span>
      
    
  </div>


    
  <!-- å¤‡æ¡ˆä¿¡æ¯ -->
  <div class="beian">
    <img src="https://image.focusprogram.top/icp_beian.png" srcset="/k-focusprogram.gitee.io/img/loading.gif" style="margin-top:-5px">
    <a href="http://beian.miit.gov.cn/" target="_blank"
       rel="nofollow noopener">è‹ICPå¤‡19063834å·-1</a>
    
      <a
        href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=44030602004695"
        rel="nofollow noopener"
        class="beian-police"
        target="_blank"
      >
        <span class="beian-police-sep">&nbsp;|&nbsp;</span>
        
          <img src="/k-focusprogram.gitee.io/img/police_beian.png" srcset="/k-focusprogram.gitee.io/img/loading.gif" alt="police-icon" />
        
        <span>è‹å…¬å®‰ç½‘å¤‡44030602004695å·</span>
      </a>
     
  </div>


    
  </div>
</footer>

<!-- SCRIPTS -->
<script  src="https://cdn.staticfile.org/jquery/3.4.1/jquery.min.js" ></script>
<script  src="https://cdn.staticfile.org/twitter-bootstrap/4.4.1/js/bootstrap.min.js" ></script>
<script  src="/k-focusprogram.gitee.io/js/debouncer.js" ></script>
<script  src="/k-focusprogram.gitee.io/js/main.js" ></script>

<!-- Plugins -->


  
    <script  src="/k-focusprogram.gitee.io/js/lazyload.js" ></script>
  



  <script defer src="https://cdn.staticfile.org/clipboard.js/2.0.6/clipboard.min.js" ></script>
  <script  src="/k-focusprogram.gitee.io/js/clipboard-use.js" ></script>



  <script defer src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" ></script>





  <script  src="https://cdn.staticfile.org/tocbot/4.11.1/tocbot.min.js" ></script>
  <script>
    $(document).ready(function () {
      var boardCtn = $('#board-ctn');
      var boardTop = boardCtn.offset().top;

      tocbot.init({
        tocSelector: '#tocbot',
        contentSelector: 'article.markdown-body',
        headingSelector: 'h1,h2,h3,h4,h5,h6',
        linkClass: 'tocbot-link',
        activeLinkClass: 'tocbot-active-link',
        listClass: 'tocbot-list',
        isCollapsedClass: 'tocbot-is-collapsed',
        collapsibleClass: 'tocbot-is-collapsible',
        collapseDepth: 0,
        scrollSmooth: true,
        headingsOffset: -boardTop
      });
      if ($('.toc-list-item').length > 0) {
        $('#toc').css('visibility', 'visible');
      }
    });
  </script>



  <script  src="https://cdn.staticfile.org/typed.js/2.0.11/typed.min.js" ></script>
  <script>
    var typed = new Typed('#subtitle', {
      strings: [
        '  ',
        "Nacos&nbsp;",
      ],
      cursorChar: "_",
      typeSpeed: 70,
      loop: false,
    });
    typed.stop();
    $(document).ready(function () {
      $(".typed-cursor").addClass("h2");
      typed.start();
    });
  </script>



  <script  src="https://cdn.staticfile.org/anchor-js/4.2.2/anchor.min.js" ></script>
  <script>
    anchors.options = {
      placement: "right",
      visible: "hover",
      
    };
    var el = "h1,h2,h3,h4,h5,h6".split(",");
    var res = [];
    for (item of el) {
      res.push(".markdown-body > " + item)
    }
    anchors.add(res.join(", "))
  </script>



  <script  src="/k-focusprogram.gitee.io/js/local-search.js" ></script>
  <script>
    var path = "/k-focusprogram.gitee.io/local-search.xml";
    var inputArea = document.querySelector("#local-search-input");
    inputArea.onclick = function () {
      searchFunc(path, 'local-search-input', 'local-search-result');
      this.onclick = null
    }
  </script>



  <script  src="https://cdn.staticfile.org/fancybox/3.5.7/jquery.fancybox.min.js" ></script>
  <link  rel="stylesheet" href="https://cdn.staticfile.org/fancybox/3.5.7/jquery.fancybox.min.css" />

  <script>
    $('#post img:not(.no-zoom img, img[no-zoom]), img[zoom]').each(
      function () {
        var element = document.createElement('a');
        $(element).attr('data-fancybox', 'images');
        $(element).attr('href', $(this).attr('src'));
        $(this).wrap(element);
      }
    );
  </script>









  <script>(function (i, s, o, g, r, a, m) {
      i['DaoVoiceObject'] = r;
      i[r] = i[r] ||
        function () {
          (i[r].q = i[r].q || []).push(arguments);
        };
      i[r].l = 1 * new Date();
      a = s.createElement(o);
      m = s.getElementsByTagName(o)[0];
      a.async = 1;
      a.src = g;
      a.charset = 'utf-8';
      m.parentNode.insertBefore(a, m);
    })(window, document, 'script', ('https:' === document.location.protocol ? 'https:' : 'http:') + "//widget.daovoice.io/widget/98eb4efd.js", 'daovoice');
    daovoice('init', {
      app_id: "98eb4efd",
    });
    daovoice('update');
  </script>









  

  

  

  

  

  




</body>
</html>